# Command Schema Database

Pre-extracted command-line interface schemas generated by the
[command-schema](https://github.com/ex1tium/command-schema) project.

Each JSON file contains a structured representation of a command's flags,
subcommands, positional arguments, and descriptions — parsed automatically from
`--help` output.

## How this branch is updated

A GitHub Actions workflow runs weekly (Sundays 02:00 UTC) and on changes to
`ci-config.yaml`. It extracts schemas from installed CLI tools and pushes
updates to this branch. Only changed commands are re-extracted (tracked via
`manifest.json` checksums and version probing).

## Usage

### Clone just the schemas

```bash
git clone --branch schemas --single-branch https://github.com/ex1tium/command-schema.git command-schemas
```

### From the main branch (library development)

```bash
# Fetch schemas into schemas/database/ for local development
make fetch-schemas
```

### Load in Rust

```rust
use command_schema_db::SchemaDatabase;

// From a directory of JSON files
let db = SchemaDatabase::from_dir(".")?;
if let Some(schema) = db.get("git") {
    println!("{} has {} subcommands", schema.command, schema.subcommands.len());
}
```

## Schema format

Each file follows the `CommandSchema` structure (version 1.0.0):

```json
{
  "schema_version": "1.0.0",
  "command": "git",
  "description": "start a working area (see also: git help tutorial)",
  "global_flags": [ ... ],
  "subcommands": [ ... ],
  "positional": [ ... ],
  "source": "HelpCommand",
  "confidence": 1.0,
  "version": null
}
```

See [`schemas/json-schema/`](https://github.com/ex1tium/command-schema/tree/main/schemas/json-schema)
on the main branch for the full JSON Schema definition.

## Files

- `*.json` — Individual command schemas (one per command)
- `manifest.json` — Extraction metadata tracking versions, checksums, and timestamps
- `README.md` — This file
